@tailwind base;
@tailwind components;
@tailwind utilities;

/* Apple-inspired base styles */
@layer base {
  html {
    font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  body {
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
    letter-spacing: -0.01em;
  }
  
  /* Improved focus states following Apple's accessibility guidelines */
  *:focus-visible {
    outline: 2px solid #007aff;
    outline-offset: 2px;
    border-radius: 4px;
  }
}

/* Apple-inspired component styles */
@layer components {
  /* Frosted glass effect */
  .frosted-glass {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.12);
  }
  
  /* Apple-style buttons */
  .btn-primary {
    @apply bg-info text-white px-6 py-3 rounded-2xl font-semibold shadow-apple hover:shadow-apple-lg transition-all duration-300 ease-apple;
  }
  
  .btn-secondary {
    @apply bg-transparent border-2 border-info text-info px-6 py-3 rounded-2xl font-semibold hover:bg-info hover:text-white transition-all duration-300 ease-apple;
  }
  
  /* Apple-style cards */
  .card {
    @apply bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-apple hover:shadow-apple-lg transition-all duration-300 ease-apple;
  }
  
  /* Apple-style navigation */
  .nav-item {
    @apply relative px-4 py-2 text-secondaryText hover:text-primaryText transition-colors duration-200 ease-apple;
  }
  
  .nav-item.active::after {
    content: '';
    @apply absolute bottom-0 left-0 right-0 h-0.5 bg-info rounded-full;
  }
}

/* Apple-inspired utility styles */
@layer utilities {
  /* Scroll progress bar */
  #scrollProgress { 
    @apply fixed top-0 left-0 h-1 w-0 bg-gradient-to-r from-info to-accentLight z-[1400]; 
  }

  /* Custom cursor */
  .cursor { 
    @apply fixed w-4 h-4 rounded-full pointer-events-none z-[9999] -translate-x-1/2 -translate-y-1/2 transition-[transform,opacity] duration-100 ease-apple mix-blend-difference; 
    background: #007aff; 
  }
  
  .cursor-follower { 
    @apply fixed w-10 h-10 rounded-full border-2 pointer-events-none z-[9998] -translate-x-1/2 -translate-y-1/2 opacity-30 transition-[transform,opacity] duration-150 ease-apple mix-blend-difference; 
    border-color: #007aff; 
  }

  /* Fade-in utility (IntersectionObserver toggles .visible) */
  .fade-in { 
    @apply opacity-0 translate-y-6 transition-all duration-500 ease-apple will-change-transform; 
  }
  
  .fade-in.visible { 
    @apply opacity-100 translate-y-0; 
  }

  /* Grain overlay */
  .grain:before { 
    content: ""; 
    pointer-events: none; 
    position: fixed; 
    inset: 0; 
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.02"/></svg>'); 
    mix-blend-mode: overlay; 
    z-index: 5; 
  }

  /* Focus ring utility for keyboard users */
  .focus-ring { 
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-info focus-visible:ring-offset-2 focus-visible:ring-offset-black; 
  }

  /* Nav underline indicator */
  .nav-link.active:after { 
    content: ""; 
    position: absolute; 
    left: 0; 
    right: 0; 
    bottom: -6px; 
    height: 2px; 
    background: #007aff; 
    border-radius: 9999px; 
  }

  /* Blur-up image placeholder */
  .blur-up { 
    filter: blur(12px); 
    transform: scale(1.02); 
  }
  
  .blur-up.loaded { 
    filter: blur(0); 
    transform: none; 
    transition: filter 300ms ease-apple, transform 300ms ease-apple; 
  }

  /* Dot rail navigation on the right */
  .dot-rail { 
    position: fixed; 
    right: 14px; 
    top: 50%; 
    transform: translateY(-50%); 
    display: flex; 
    flex-direction: column; 
    gap: 10px; 
    z-index: 1100; 
  }
  
  .dot-rail a { 
    width: 10px; 
    height: 10px; 
    border-radius: 9999px; 
    background: rgba(255,255,255,0.28); 
    display: block; 
    transition: transform 250ms ease-apple, background 200ms ease-apple; 
  }
  
  .dot-rail a.active, .dot-rail a:hover { 
    background: #007aff; 
    transform: scale(1.25); 
  }

  /* 8pt grid helpers (spacing consistency) */
  .space-8 { padding: 8px; }
  .space-16 { padding: 16px; }
  .space-24 { padding: 24px; }

  /* Tag colors */
  .tag-cv { background: rgba(6,182,212,0.12); color: #06b6d4; }
  .tag-ml { background: rgba(34,197,94,0.12); color: #22c55e; }
  .tag-deploy { background: rgba(245,158,11,0.12); color: #f59e0b; }
  
  /* Apple-style text gradients */
  .text-gradient-primary {
    @apply bg-gradient-to-r from-info to-accentLight bg-clip-text text-transparent;
  }
  
  .text-gradient-secondary {
    @apply bg-gradient-to-r from-neutral-100 to-neutral-400 bg-clip-text text-transparent;
  }
  
  /* Apple-style shadows */
  .shadow-apple { box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); }
  .shadow-apple-lg { box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23); }
  .shadow-apple-xl { box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23); }
  
  /* Apple-style transitions */
  .transition-apple { transition: all 300ms cubic-bezier(0.25, 0.46, 0.45, 0.94); }
  .transition-apple-fast { transition: all 150ms cubic-bezier(0.25, 0.46, 0.45, 0.94); }
  .transition-apple-slow { transition: all 400ms cubic-bezier(0.25, 0.46, 0.45, 0.94); }
}
